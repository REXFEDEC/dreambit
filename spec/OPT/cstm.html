<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="/icon/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/icon/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/icon/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icon/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/icon/favicon/site.webmanifest" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom PC Builder - DreamBit Tech</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="/js/universal.js" defer></script>
    <script
        async
        crossorigin="anonymous"
        data-clerk-publishable-key="pk_test_ZW5kbGVzcy1zaHJldy0yNy5jbGVyay5hY2NvdW50cy5kZXYk"
        src="https://endless-shrew-27.clerk.accounts.dev/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"
        type="text/javascript"
    ></script>
</head>
<body>
    <header>
        <div class="header-left">
            <img src="/icons/dbt.png" alt="DreamBit Tech Logo" class="logo">
            <div class="header-text">
                <h1>DreamBit Tech</h1>
                <p>We Build Dreams, for Real.</p>
            </div>
        </div>    
        <div class="header-right">
            <button id="theme-toggle">ðŸŒ™</button>
            <nav>
                <ul>
                    <li><a href="/index.html">Home</a></li>
                    <li><a href="/ever/products.html">Products</a></li>
                    <li><a href="/ever/news.html">News</a></li>
                    <li><div id="user-auth"></div></li>
                </ul>
            </nav>
        </div>
    </header>
    <div class="background-animation">
        <div class="orb"></div>
        <div class="orb"></div>
      </div>

    <main>
        <section class="pc-builder">
            <h2>Build Your Custom PC</h2>
            <p class="section-subtitle">Select components step by step</p>

            <div class="builder-container">
                <form id="pc-builder-form">
                    <!-- CPU Selection -->
                    <div class="component-step active" id="cpu-step">
                        <h3>1. Select CPU</h3>
                        <div class="component-grid">
                            <!-- Intel CPUs that need GPU -->
                            <div class="component-card" data-id="i512" data-socket="lga1700" data-needs-gpu="true" data-has-cooler="true" data-price="9398">
                                <img src="/part/cpu/i512.jpg" alt="Intel i5-12400F">
                                <h4>Intel i5-12400F</h4>
                                <p class="price">â‚¹9,398</p>
                                <p class="requirement">Requires GPU</p>
                                <p class="included">Includes CPU Cooler</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="i514" data-socket="lga1700" data-needs-gpu="true" data-has-cooler="true" data-price="15000">
                                <img src="/part/cpu/i514.jpg" alt="Intel i5-14400F">
                                <h4>Intel i5-14400F</h4>
                                <p class="price">â‚¹15,000</p>
                                <p class="requirement">Requires GPU</p>
                                <p class="included">Includes CPU Cooler</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            
                            <!-- AMD CPUs that need cooler -->
                            <div class="component-card" data-id="ryz5n9600x" data-socket="am5" data-needs-gpu="false" data-has-cooler="false" data-price="24499">
                                <img src="/part/cpu/ryz5n9600x.jpg" alt="Ryzen 5 9600X">
                                <h4>Ryzen 5 9600X</h4>
                                <p class="price">â‚¹24,499</p>
                                <p class="included">Integrated Graphics</p>
                                <p class="requirement">Requires Cooler</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="ryz9n9800x3d" data-socket="am5" data-needs-gpu="false" data-has-cooler="false" data-price="47789">
                                <img src="/part/cpu/ryz7n9800x3d.jpg" alt="Ryzen 9 9800X3D">
                                <h4>Ryzen 9 9800X3D</h4>
                                <p class="price">â‚¹47,789</p>
                                <p class="included">Integrated Graphics</p>
                                <p class="requirement">Requires Cooler</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            
                            <!-- CPU with integrated graphics and included cooler -->
                            <div class="component-card" data-id="ryz5n7600x" data-socket="am5" data-needs-gpu="false" data-has-cooler="true" data-price="18699">
                                <img src="/part/cpu/ryz5n7600x.jpg" alt="Ryzen 5 7600X">
                                <h4>Ryzen 5 7600X</h4>
                                <p class="price">â‚¹18,699</p>
                                <p class="included">Integrated Graphics</p>
                                <p class="included">Includes CPU Cooler</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                        </div>
                    </div>

                    <!-- Motherboard Selection (Initially Hidden) -->
                    <div class="component-step" id="mb-step">
                        <h3>2. Select Motherboard</h3>
                        <div class="component-grid">
                            <!-- Intel Motherboards -->
                            <div class="component-card" data-id="gbh610m" data-socket="lga1700" data-price="6399">
                                <img src="/part/mb/gbh610m.jpg" alt="Gigabyte H610M">
                                <h4>Gigabyte H610M</h4>
                                <p class="price">â‚¹6,399</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="msib760b" data-socket="lga1700" data-price="12199">
                                <img src="/part/mb/msib760b.jpg" alt="MSI B760 BOMB">
                                <h4>MSI B760 BOMB</h4>
                                <p class="price">â‚¹12,199</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <!-- AMD Motherboards -->
                            <div class="component-card" data-id="msib650mp" data-socket="am5" data-price="10999">
                                <img src="/part/mb/msib650mp.jpg" alt="MSI B650M-P">
                                <h4>MSI B650M-P</h4>
                                <p class="price">â‚¹10,999</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="msib650mg" data-socket="am5" data-price="17590">
                                <img src="/part/mb/msib650mg.jpg" alt="MSI B650 Gaming">
                                <h4>MSI B650 Gaming</h4>
                                <p class="price">â‚¹17,590</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="aoruseliteax" data-socket="am5" data-price="27999">
                                <img src="/part/mb/aoruseliteax.jpg" alt="AORUS ELITE AX">
                                <h4>AORUS ELITE AX</h4>
                                <p class="price">â‚¹27,999</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                        </div>
                    </div>

                    <!-- GPU Selection -->
                    <div class="component-step" id="gpu-step">
                        <h3>3. Select Graphics Card</h3>
                        <div class="component-grid">
                            <div class="component-card" data-id="gx1650" data-price="13840">
                                <img src="/part/gpu/gx1650.jpg" alt="GALAX 1650">
                                <h4>GALAX GTX 1650</h4>
                                <p class="price">â‚¹13,840</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="in3d3060" data-price="24000">
                                <img src="/part/gpu/in3d3060.jpg" alt="INNO3D 3060">
                                <h4>INNO3D RTX 3060</h4>
                                <p class="price">â‚¹24,000</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="gx4060ti8" data-price="38000">
                                <img src="/part/gpu/gx4060ti8.jpg" alt="GALAX 4060 Ti">
                                <h4>GALAX RTX 4060 Ti 8GB</h4>
                                <p class="price">â‚¹38,000</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="gb4070ti" data-price="86925">
                                <img src="/part/gpu/gb4070tis.jpg" alt="Gigabyte 4070 Ti SUPER">
                                <h4>GIGABYTE RTX 4070 Ti SUPER</h4>
                                <p class="price">â‚¹86,925</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                        </div>
                    </div>

                    <!-- PSU Selection -->
                    <div class="component-step" id="psu-step">
                        <h3>4. Select Power Supply</h3>
                        <div class="component-grid">
                            <div class="component-card" data-id="cmmwe450bn" data-price="3349">
                                <img src="/part/psu/cmmwe450bn.jpg" alt="CM MWE 450BN">
                                <h4>Cooler Master MWE 450W</h4>
                                <p class="price">â‚¹3,349</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="msimaga650bn" data-price="4790">
                                <img src="/part/psu/msimaga650bn.jpg" alt="MSI MAG A650BN">
                                <h4>MSI MAG A650BN</h4>
                                <p class="price">â‚¹4,790</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="msimaga750gl" data-price="8369">
                                <img src="/part/psu/msimaga750gl.jpg" alt="MSI MAG A750GL">
                                <h4>MSI MAG A750GL</h4>
                                <p class="price">â‚¹8,369</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="msimaga850gl" data-price="9282">
                                <img src="/part/psu/msimaga850gl.jpg" alt="MSI MAG A850GL">
                                <h4>MSI MAG A850GL</h4>
                                <p class="price">â‚¹9,282</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                        </div>
                    </div>

                    <!-- RAM Selection -->
                    <div class="component-step" id="ram-step">
                        <h3>5. Select Memory</h3>
                        <div class="component-grid">
                            <div class="component-card" data-id="cial8green" data-size="8" data-price="1375">
                                <img src="/part/ram/cial8green.jpg" alt="CIAL 8GB GREEN">
                                <h4>CIAL 8GB GREEN</h4>
                                <p class="price">â‚¹1,375</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="cial16blk" data-size="16" data-price="3750">
                                <img src="/part/ram/cial16blk.jpg" alt="CIAL 16GB BLACK">
                                <h4>CIAL 16GB BLACK</h4>
                                <p class="price">â‚¹3,750</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="gskill16gb6kmhz" data-size="16" data-price="8829">
                                <img src="/part/ram/gskill16gb6kmhz.jpg" alt="G.Skill 16GB 6000MHz">
                                <h4>G.Skill 16GB 6000MHz</h4>
                                <p class="price">â‚¹8,829</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                        </div>
                    </div>

                    <!-- Storage Selection -->
                    <div class="component-step" id="storage-step">
                        <h3>6. Select Storage</h3>
                        <div class="component-grid">
                            <div class="component-card" data-id="wd250green" data-size="250" data-price="1690">
                                <img src="/part/storage/wd250green.jpg" alt="WD Green 250GB">
                                <h4>WD Green 250GB SSD</h4>
                                <p class="price">â‚¹1,690</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="cialp3p500" data-size="500" data-price="3120">
                                <img src="/part/storage/cialp3p500.jpg" alt="CIAL P3P 500GB">
                                <h4>CIAL P3P 500GB NVMe</h4>
                                <p class="price">â‚¹3,120</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="cialp3p1000" data-size="1000" data-price="5199">
                                <img src="/part/storage/cialp3p1000.jpg" alt="CIAL P3P 1TB">
                                <h4>CIAL P3P 1TB NVMe</h4>
                                <p class="price">â‚¹5,199</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="kioxia2tb" data-size="2000" data-price="10799">
                                <img src="/part/storage/kioxia2tb.jpg" alt="KIOXIA 2TB">
                                <h4>KIOXIA 2TB NVMe</h4>
                                <p class="price">â‚¹10,799</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                        </div>
                    </div>

                    <!-- Case Selection -->
                    <div class="component-step" id="case-step">
                        <h3>7. Select Case</h3>
                        <div class="component-grid">
                            <div class="component-card" data-id="zebzium" data-price="1799">
                                <img src="/part/cabinets/zebzium.jpg" alt="ZEBRONICS ZIUM">
                                <h4>ZEBRONICS ZIUM</h4>
                                <p class="price">â‚¹1,799</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="zebrob" data-price="2299">
                                <img src="/part/cabinets/zebrob.jpg" alt="ZEBRONICS ROBUST">
                                <h4>ZEBRONICS ROBUST</h4>
                                <p class="price">â‚¹2,299</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="msimagpano" data-price="9069">
                                <img src="/part/cabinets/msimagpano.jpg" alt="MSI MAG PANO">
                                <h4>MSI MAG PANO</h4>
                                <p class="price">â‚¹9,069</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="nzxth6" data-price="11059">
                                <img src="/part/cabinets/nzxth6.jpg" alt="NZXT H6 FLOW">
                                <h4>NZXT H6 FLOW</h4>
                                <p class="price">â‚¹11,059</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                        </div>
                    </div>

                    <!-- Cooling Selection -->
                    <div class="component-step" id="cooling-step">
                        <h3>8. Select Cooling</h3>
                        <div class="component-grid">
                            <div class="component-card" data-id="cm2f" data-type="aio" data-price="5999">
                                <img src="/part/cooling/cm2f.jpg" alt="Cooler Master 240mm AIO">
                                <h4>Cooler Master 240mm AIO</h4>
                                <p class="price">â‚¹5,999</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                            <div class="component-card" data-id="msimastercore" data-type="aio" data-price="7930">
                                <img src="/part/cooling/msimastercore.jpg" alt="MSI MASTER CORE 360mm">
                                <h4>MSI MASTER CORE 360mm</h4>
                                <p class="price">â‚¹7,930</p>
                                <button type="button" class="select-btn">Select</button>
                            </div>
                        </div>
                    </div>
                </form>

                <!-- Selected Components Summary -->
                <div class="build-summary">
                    <h3>Your Build</h3>
                    <div id="selected-components"></div>
                    <div id="total-price"></div>
                </div>

                <div class="builder-actions">
                    <button type="button" id="reset-build" class="action-btn reset-btn">
                        Reset Build
                    </button>
                    <button type="button" id="add-to-cart" class="action-btn complete-btn">
                        Add to Cart
                    </button>
                </div>
            </div>
        </section>
    </main>
    <div class="floating-brand">
        <img src="/icons/dbt.png" alt="DreamBit Tech Logo" class="logo">
        <h1>DreamBit Tech</h1>
    </div>

    <footer>
        <p>&copy; 2025 DreamBit Tech. All rights reserved.</p>
    </footer>
    <button class="scroll-top" aria-label="Scroll to top">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 19V5M5 12l7-7 7 7"/>
        </svg>
    </button>

    <script>
    // Component state
    const state = {
        selectedComponents: {},
        currentStep: 'cpu',
        steps: ['cpu', 'mb', 'gpu', 'psu', 'ram', 'storage', 'case', 'cooling']
    };

        // Initially hide all steps except CPU
        state.steps.forEach(step => {
            const element = document.getElementById(`${step}-step`);
            if (step !== 'cpu') {
                element.style.display = 'none';
            }
        });

        // Add click handlers to all select buttons
        document.querySelectorAll('.select-btn').forEach(button => {
            button.addEventListener('click', handleComponentSelection);
        });


    // Update handleComponentSelection function
    function handleComponentSelection(e) {
        const card = e.target.closest('.component-card');
        const stepElement = card.closest('.component-step');
        const componentType = stepElement.id.replace('-step', '');
        
        // Update selection with cooler and gpu requirements
        state.selectedComponents[componentType] = {
            id: card.dataset.id,
            price: parseInt(card.dataset.price),
            socket: card.dataset.socket,
            needsGpu: card.dataset.needsGpu === 'true',
            hasCooler: card.dataset.hasCooler === 'true'
        };

        // Collapse current step
        stepElement.classList.add('completed');
        
        // Hide all other cards
        stepElement.querySelectorAll('.component-card').forEach(c => {
            c.style.display = 'none';
            c.classList.remove('selected', 'collapsed');
        });
        
        // Show and collapse selected card
        card.style.display = 'flex';
        card.classList.add('selected', 'collapsed');

        // Show next step with updated requirements
        const nextIndex = state.steps.indexOf(componentType) + 1;
        if (nextIndex < state.steps.length) {
            const nextStep = state.steps[nextIndex];
            const nextElement = document.getElementById(`${nextStep}-step`);

            // For GPU step, always show but add integrated option if available
            if (nextStep === 'gpu') {
                nextElement.style.display = 'block';
                if (!state.selectedComponents.cpu.needsGpu) {
                    const gpuGrid = document.querySelector('#gpu-step .component-grid');
                    if (!document.querySelector('[data-id="integrated-gpu"]')) {
                        const integratedOption = document.createElement('div');
                        integratedOption.className = 'component-card';
                        integratedOption.dataset.id = 'integrated-gpu';
                        integratedOption.dataset.price = '0';
                        integratedOption.innerHTML = `
                            <img src="/part/gpu/integrated.jpg" alt="Integrated Graphics">
                            <h4>Use Integrated Graphics</h4>
                            <p class="price">Included with CPU</p>
                            <button type="button" class="select-btn">Select</button>
                        `;
                        gpuGrid.insertBefore(integratedOption, gpuGrid.firstChild);
                        integratedOption.querySelector('.select-btn').addEventListener('click', handleComponentSelection);
                    }
                }
            }
            // For cooling step, always show but add stock cooler if available
            else if (nextStep === 'cooling') {
                nextElement.style.display = 'block';
                if (state.selectedComponents.cpu.hasCooler) {
                    const coolingGrid = document.querySelector('#cooling-step .component-grid');
                    if (!document.querySelector('[data-id="box-cooler"]')) {
                        const boxCooler = document.createElement('div');
                        boxCooler.className = 'component-card';
                        boxCooler.dataset.id = 'box-cooler';
                        boxCooler.dataset.price = '0';
                        boxCooler.innerHTML = `
                            <img src="/part/cooling/stock.jpg" alt="Box Cooler">
                            <h4>Use Box Cooler</h4>
                            <p class="price">Included with CPU</p>
                            <button type="button" class="select-btn">Select</button>
                        `;
                        coolingGrid.insertBefore(boxCooler, coolingGrid.firstChild);
                        boxCooler.querySelector('.select-btn').addEventListener('click', handleComponentSelection);
                    }
                }
            } else {
                nextElement.style.display = 'block';
                filterCompatibleComponents(nextStep);
            }
        }

        updateBuildSummary();
    }

    function filterCompatibleComponents(step) {
        switch(step) {
            case 'mb':
                const cpuSocket = state.selectedComponents.cpu.socket;
                document.querySelectorAll('#mb-step .component-card').forEach(card => {
                    card.style.display = card.dataset.socket === cpuSocket ? 'block' : 'none';
                });
                break;

            case 'cooling':
                const coolingGrid = document.querySelector('#cooling-step .component-grid');
                if (state.selectedComponents.cpu.id.includes('ryz') && !document.querySelector('[data-id="stock-cooler"]')) {
                    const stockCooler = document.createElement('div');
                    stockCooler.className = 'component-card';
                    stockCooler.dataset.id = 'stock-cooler';
                    stockCooler.dataset.price = '0';
                    stockCooler.innerHTML = `
                        <img src="/part/cooling/stock.jpg" alt="Stock Cooler">
                        <h4>AMD Stock Cooler</h4>
                        <p class="price">Included</p>
                        <button type="button" class="select-btn">Select</button>
                    `;
                    coolingGrid.insertBefore(stockCooler, coolingGrid.firstChild);
                    stockCooler.querySelector('.select-btn').addEventListener('click', handleComponentSelection);
                }
                break;
        }
    }

    function updateBuildSummary() {
        const summary = document.getElementById('selected-components');
        const total = document.getElementById('total-price');
        let totalPrice = 0;
        
        summary.innerHTML = '';
        Object.entries(state.selectedComponents).forEach(([type, component]) => {
            summary.innerHTML += `
                <div class="selected-item">
                    <span>${type.toUpperCase()}: ${component.id}</span>
                    <span>â‚¹${component.price.toLocaleString()}</span>
                </div>
            `;
            totalPrice += component.price;
        });
        
        total.innerHTML = `<div class="total">Total: â‚¹${totalPrice.toLocaleString()}</div>`;
        updateButtonStates();
    }

    function resetBuild() {
        // Reset state
        state.selectedComponents = {};
        
        // Hide all steps except CPU
        state.steps.forEach(step => {
            const element = document.getElementById(`${step}-step`);
            if (step !== 'cpu') {
                element.style.display = 'none';
            }
        });
        
        // Reset all component cards
        document.querySelectorAll('.component-card').forEach(card => {
            card.style.display = 'block';
            card.classList.remove('selected', 'collapsed');
        });
        
        // Reset step completion status
        document.querySelectorAll('.component-step').forEach(step => {
            step.classList.remove('completed');
            if (step.id === 'cpu-step') {
                step.classList.add('active');
            }
        });
        
        // Clear build summary
        updateBuildSummary();
    }

    // Replace the completeBuild function with addToCart
    function addToCart() {
        const requiredSteps = ['cpu', 'mb', 'ram', 'storage', 'case'];
        const missingSteps = requiredSteps.filter(step => !state.selectedComponents[step]);
        
        if (missingSteps.length > 0) {
            alert('Please select all required components:\n' + 
                  missingSteps.map(step => step.toUpperCase()).join(', '));
            return;
        }
        
        // Check if GPU is required but not selected
        if (state.selectedComponents.cpu.needsGpu && !state.selectedComponents.gpu) {
            alert('This CPU requires a dedicated GPU. Please select one.');
            return;
        }
        
        // Ensure cooling is selected
        if (!state.selectedComponents.cooling) {
            alert('Please select a cooling solution (Box Cooler or Aftermarket).');
            return;
        }

        // Create custom PC build product
        const buildComponents = Object.entries(state.selectedComponents)
            .map(([type, component]) => `${type.toUpperCase()}: ${component.id}`)
            .join(', ');

        const totalPrice = Object.values(state.selectedComponents)
            .reduce((sum, component) => sum + component.price, 0);

        // Add to cart using the cart functionality from universal.js
        cart.addItem({
            id: 'custom-pc-' + Date.now(), // Unique ID for the build
            name: 'Custom PC Build',
            price: totalPrice,
            type: 'custom-pc',
            description: buildComponents
        });

        // Reset the builder after adding to cart
        resetBuild();
    }

    // Update event listeners
    document.getElementById('reset-build').addEventListener('click', resetBuild);
    document.getElementById('add-to-cart').addEventListener('click', addToCart);

    // Update button states based on selection
    function updateButtonStates() {
        const addToCartBtn = document.getElementById('add-to-cart');
        const requiredSteps = ['cpu', 'mb', 'ram', 'storage', 'case'];
        const isComplete = requiredSteps.every(step => state.selectedComponents[step]);
        addToCartBtn.disabled = !isComplete;
    }
</script>
</body>
</html>